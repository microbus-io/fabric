// Code generated by Microbus. DO NOT EDIT.

/*
Package {{ .PackageSuffix }} implements the {{ .General.Host }} microservice.
{{- if .General.Description }}

{{ .General.Description }}
{{- end }}
*/
package {{ .PackageSuffix }}

import (
	"context"
	"net/http"
	"time"

	"github.com/microbus-io/fabric/connector"
	"github.com/microbus-io/fabric/errors"

	"{{ .Package }}/intermediate"
	"{{ .Package }}/{{ .PackageSuffix }}api"
)

var (
	_ context.Context
	_ *http.Request
	_ time.Duration
	_ *connector.Connector
	_ *errors.TracedError
	_ *{{ .PackageSuffix }}api.Client
)

// The default host name of the microservice is {{ .General.Host }}.
const HostName = "{{ .General.Host }}"

// NewService creates a new {{ .General.Host }} microservice.
func NewService() *Service {
	s := &Service{}
	s.Intermediate = intermediate.New(s, Version)
	return s
}

{{- if .Configs }}

type Initializer = intermediate.Initializer

// Config initializers
var (
	{{- range .Configs}}
	// {{ .Name }} initializes the {{ .Name }} config property of the microservice
	{{ .Name }} = intermediate.{{ .Name }}
	{{- end}}
)

/*
With initializes the config properties of the microservice for testings purposes.

	{{ .PackageSuffix }}Svc := {{ .PackageSuffix }}.NewService().With(...)
*/
func (svc *Service) With(initializers ...Initializer) *Service {
	svc.Intermediate.With(initializers...)
	return svc
}
{{- end }}
